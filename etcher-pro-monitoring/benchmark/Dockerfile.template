FROM balenalib/%%BALENA_MACHINE_NAME%%-debian-node:12.6-buster
RUN \
  apt-get update && \
  apt-get install -y stress htop dcfldd && \
  rm -rf /var/lib/apt/lists/*
WORKDIR /usr/src/app
COPY dd.sh flash.ts package.json package-lock.json ./
RUN npm i
ENV UDEV=1
ENV UV_THREADPOOL_SIZE=128
RUN echo "echo \"stress, htop, dd and dcfldd are installed, try running ./flash.ts --help\"" >> /etc/bash.bashrc
CMD sleep infinity
